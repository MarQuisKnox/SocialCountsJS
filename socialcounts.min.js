/*! SocialCountsJS / @author: Seon-Wook Park / @license: LGPLv3 */
(function(){var t=/^[htfps]+:\/\/.*/,n="http://swook.github.io/SocialCountsJS/socialcounts.xml",o="socialcounts_receiver",e="http://query.yahooapis.com/v1/public/yql?q=USE%20%27",r="%27%3B&format=json&jsonCompat=new&callback="+o,u=[];e+=encodeURIComponent(n)+"%27%20AS%20tbl%3B%20SELECT%20*%20FROM%20tbl%20WHERE%20url%3D%27";window.socialcounts=function(){var n,o;if(typeof arguments[0]=="function"){n=document.location.href;o=arguments[0]}else if(typeof arguments[0]=="string"&&typeof arguments[1]=="function"){n=arguments[0];o=arguments[1]}else{console.error("socialcounts: invalid input parameters.");return}if(!t.test(n))n="http://"+n;var i=document.createElement("script"),s=new Date;i.type="text/javascript";i.id="sc"+s.getTime()+"_"+Math.round(Math.random()*1e6);i.src=e+encodeURIComponent(n)+r;document.body.appendChild(i);u.push({url:n,func:o,sel_id:i.id,subt:s,trial:1})};window[o]=function(t){if("query"in t&&"results"in t.query&&"result"in t.query.results){var n=t.query.results.result;var o=null,e=u.length;for(var r=0;r<e;r++){o=u.pop();if(n.url!=o.url){u.push(o);continue}document.body.removeChild(document.getElementById(o.sel_id));o.func(n)}}};var i=["k","m","b","t"];window.socialcounts.fmt={"short":function(t){var n,o,e,r,u,s;for(var c in t.counts){n=t.counts[c];if(typeof n!=="number")continue;o=n.toString();e=o.length;r=e-1;if(e<4){t.counts[c]=o;continue}u=Math.floor(r/3);s=r%3;if(s===0){r=Math.pow(10,r-1);o=(Math.round(n/r)*r).toString();t.counts[c]=o.slice(0,1)+"."+o.slice(1,2)}else if(s===1){r=Math.pow(10,r-1);o=(Math.round(n/r)*r).toString();t.counts[c]=o.slice(0,2)}else if(s===2){r=Math.pow(10,r-2);o=(Math.round(n/r)*r).toString();t.counts[c]=o.slice(0,3)}t.counts[c]+=i[u-1]}return t},comma:function(t){var n;for(var o in t.counts){n=t.counts[o];if(typeof n!=="number")continue;t.counts[o]=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return t}}})(null);